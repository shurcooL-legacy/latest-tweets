<html>
	<head>
		<script type="text/javascript">
			var site_name = "Latest Tweets";//removeTags(JSON.parse(httpGet("https://api.github.com/gists/???????")).files["gistfile1.txt"].content);
			var username = window.location.search.substr(1);
			document.write("<title>" + ((0 != username.length) ? username + " - " : "") + site_name + "</title>");

			function removeTags(html) {
				return html.replace(/&/g, "&amp;").replace(/>/g, "&gt;").replace(/</g, "&lt;").replace(/"/g, "&quot;");
			}

			function getUrlParam(name) {
				if (name = (new RegExp('[?&]' + encodeURIComponent(name) + '=([^&]*)')).exec(window.location.search))
					return decodeURIComponent(name[1]);
			}

			function httpGet(url) {
				var xmlHttp = new XMLHttpRequest();
				xmlHttp.open("GET", url, false);
				xmlHttp.send();
				return xmlHttp.responseText;
			}

			function httpGetAccept(url, accept) {
				var xmlHttp = new XMLHttpRequest();
				xmlHttp.open("GET", url, false);
				xmlHttp.setRequestHeader("Accept", accept);
				xmlHttp.send();
				return xmlHttp.responseText;
			}
		</script>
		<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
		<style type="text/css">
			body, input, textarea, select, button, * {
				font-family: 'Open Sans', sans-serif;
				font-size: 12px;
			}
			td {
				padding: 0px;
				vertical-align: top;
			}
			table {
				border-collapse: collapse;
				border-spacing: 0;
			}
			.smaller {
				color: #999;
				font-size: 10px;
			}
			img {
				border-radius: 3px;
			}
		</style>
	</head>
	<body>
		<script type="text/javascript">
			document.write(site_name);
		</script>
		<br><br>
		<form name="myForm" action="javascript:updateUrl();">
			<label for=name>Twitter username @</label><input id="name" placeholder="example" style="margin-left: 0px;"></input>
			<input id=myButton name=myButton type=submit value="Go"></input>
		</form>

		<div id="twitterFollowees"></div>
		<script type="text/javascript">
			//if (null != getUrlParam("name"))
			//	document.myForm.name.value = getUrlParam("name");
			document.myForm.name.value = window.location.search.substr(1);

			function updateUrl() {
				var name = document.myForm.name.value;
				window.location.search = name;
			}

			function doThisThing() {
				var name = document.myForm.name.value;
				var out = document.getElementById("outputBox");

				try {
					var scriptTag = document.createElement("script");
					scriptTag.type = "text/javascript";
					scriptTag.src = "https://api.twitter.com/1/statuses/friends/" + name + ".json?callback=twitterFolloweesCallback2";
					document.body.appendChild(scriptTag);
				} catch (exc) {
					document.getElementById("twitterFollowees").textContent = "Exception: " + exc;
				}
			}

			if (0 != document.myForm.name.value.length)
				doThisThing();

			function twitterFolloweesCallback2(json) {
				var out = document.getElementById("twitterFollowees");
				var innerHTML = "";
				innerHTML += "<table>";
				for (var i = 0; i < json.length; i++) {
					innerHTML += "<tr><td style='padding-right: 3px;'>";
					innerHTML += "<img src=\"" + json[i].profile_image_url_https + "\" width=16 height=16></td><td style='padding-right: 3px;'>";
					innerHTML += removeTags(json[i].name) + " <span class='smaller'>@" + removeTags(json[i].screen_name) + "</span></td>";
					if (null != json[i].status) innerHTML += "<td>" + json[i].status.text + "</td>";
					innerHTML += "</tr>";
				};
				innerHTML += "</table>";
				out.innerHTML = innerHTML;
			}
		</script>
	</body>
</html>